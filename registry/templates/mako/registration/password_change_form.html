<%inherit file="admin/base_site.html"/>
<%namespace name="admin" module="django.contrib.admin.templatetags.adminmedia" />
<%namespace name="ra" module="registry.admin"/>

${self.block_extrastyle()}<%def name="block_extrastyle()">
<link rel="stylesheet" type="text/css" href="${ admin_media_prefix() }css/forms.css" />
<link rel="stylesheet" type="text/css" media="screen" href="${ra.url('/static/css/%s_admin.css' % ra.get_current_install_name())}" />
</%def>

<%def name="block_extrahead()">
<script type="text/javascript" src="${ra.url('/static/admin-media/js/jquery.min.js')}"></script>
<script type="text/javascript" src="${ra.url('/static/admin-media/js/jquery.init.js')}"></script>
<script type="text/javascript" src="${ra.url('/static/js/digitalspaghetti.password.js')}"></script>
</%def>

${self.block_userlinks()}<%def name="block_userlinks()">
${trans('Change password')} / <a href="../logout/">${trans('Log out')}</a></%def>
${self.block_breadcrumbs()}<%def name="block_breadcrumbs()"><div class="breadcrumbs"><a href="../">${trans('Home')}</a> &rsaquo; ${trans('Password change')}</div></%def>

${self.block_title()}<%def name="block_title()">${trans('Password change')}</%def>

${self.block_content()}<%def name="block_content()">
<div id="content-main">

<form action="" method="post">${ csrf_tag(csrf_token) }
<div>
% if form.errors:
    <p class="errornote">
    % if len(form.errors.items())==1:
        Please correct the error below.
    % else:
        Please correct the errors below.
    % endif
    </p>
% endif

<h1>${trans('Password change')}</h1>

<p>${ trans("Please enter your old password, for security's sake, and then enter your new password twice so we can verify you typed it in correctly.") }</p>

<fieldset class="module aligned wide">

<div class="form-row">
% if 'old_password' in form and form['old_password'].errors:
    ${form['old_password'].errors}
% endif
    <label for="id_old_password" class="required">${trans('Old password')}:</label>${form['old_password']}
</div>

<div class="form-row">
% if form['new_password1'].errors:
    ${form['new_password1'].errors}
% endif
    <div style="width:400px;">
    <label for="id_new_password1" class="required">${trans('New password')}:</label>${form['new_password1']}
    </div>
</div>

<div class="form-row">
% if form['new_password2'].errors:
    ${form['new_password2'].errors}
% endif
    <label for="id_new_password2" class="required">${trans('Password (again)')}:</label>${form['new_password2']}
</div>

</fieldset>
  
<div class="submit-row">
    <input type="submit" value="${ trans('Change my password') }" class="default" />
</div>


</div>
</form></div>

<script type="text/javascript">document.getElementById("id_old_password").focus();</script>
<script type="text/javascript">django.jQuery('#id_new_password1').pstrength();</script>

</%def>
